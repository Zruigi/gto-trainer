export function renderGraph(el, points) {
  const w = 800, h = 400
  const minY = Math.min(...points.map(p=>p.y), 0)
  const maxY = Math.max(...points.map(p=>p.y), 0)
  const scaleX = w / Math.max(points.length - 1, 1)
  const scaleY = h / (maxY - minY || 1)
  const path = points.map((p,i)=>`${i===0?'M':'L'} ${i*scaleX} ${h - (p.y - minY)*scaleY}`).join(' ')
  el.innerHTML = ''
  const svg = document.createElementNS('http://www.w3.org/2000/svg','svg')
  svg.setAttribute('width', w)
  svg.setAttribute('height', h)
  const defs = document.createElementNS('http://www.w3.org/2000/svg','defs')
  const grad = document.createElementNS('http://www.w3.org/2000/svg','linearGradient')
  grad.setAttribute('id','g')
  grad.setAttribute('x1','0')
  grad.setAttribute('x2','0')
  grad.setAttribute('y1','0')
  grad.setAttribute('y2','1')
  const s1 = document.createElementNS('http://www.w3.org/2000/svg','stop')
  s1.setAttribute('offset','0%')
  s1.setAttribute('stop-color','#36c')
  s1.setAttribute('stop-opacity','0.5')
  const s2 = document.createElementNS('http://www.w3.org/2000/svg','stop')
  s2.setAttribute('offset','100%')
  s2.setAttribute('stop-color','#36c')
  s2.setAttribute('stop-opacity','0')
  grad.appendChild(s1);grad.appendChild(s2);defs.appendChild(grad);svg.appendChild(defs)
  const p = document.createElementNS('http://www.w3.org/2000/svg','path')
  p.setAttribute('d', path)
  p.setAttribute('fill','none')
  p.setAttribute('stroke','#36c')
  p.setAttribute('stroke-width','2')
  svg.appendChild(p)
  const area = document.createElementNS('http://www.w3.org/2000/svg','path')
  const dArea = `${path} L ${w} ${h} L 0 ${h} Z`
  area.setAttribute('d', dArea)
  area.setAttribute('fill','url(#g)')
  svg.appendChild(area)
  el.appendChild(svg)
}

